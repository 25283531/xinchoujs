# 薪酬管理系统用户手册补充 - 薪酬组管理

## 薪酬组管理详细说明

### 薪酬项与薪酬组关系

薪酬组是多个薪酬项的集合，通过设定计算顺序和公式引用，实现复杂的薪酬计算逻辑。系统支持以下功能：

- 将多个薪酬项组合成完整的薪酬方案
- 为薪酬项设定计算顺序，支持跨项引用计算
- 使用变量名编辑公式，提高可读性和可维护性
- 将薪酬组分配给部门、职位或单独员工

### 薪酬项管理增强功能

#### 公式编辑器

1. 在创建或编辑薪酬项时，选择类型为「公式」
2. 使用公式编辑器输入计算公式
3. 语法格式：使用 `${薪酬项名称}` 引用其他薪酬项
4. 示例：`${基本工资} * 0.2` 表示基本工资的20%
5. 系统提供语法高亮和变量提示功能，方便编辑

#### 薪酬项类型

系统支持三种类型的薪酬项：

1. **固定金额**：直接设置固定的金额值
2. **百分比**：设置百分比值，通常与其他薪酬项结合使用
3. **公式**：使用数学表达式和变量引用，实现复杂计算

### 薪酬组管理详细步骤

#### 创建薪酬组

1. 在系统菜单中选择「薪酬管理」→「薪酬组管理」
2. 点击「新增薪酬组」按钮
3. 填写薪酬组名称（必填）和描述（可选）
4. 添加薪酬项并设定计算顺序：
   - 点击「添加薪酬项」按钮
   - 从下拉列表中选择薪酬项
   - 设置计算顺序（数字越小越先计算）
   - 可添加多个薪酬项
5. 系统会自动验证公式引用的合法性
6. 点击「保存」按钮完成创建

#### 编辑薪酬组

1. 在薪酬组列表中找到需要编辑的薪酬组
2. 点击「编辑」按钮
3. 修改薪酬组信息和薪酬项设置
4. 点击「保存」按钮完成编辑

#### 删除薪酬组

1. 在薪酬组列表中找到需要删除的薪酬组
2. 点击「删除」按钮
3. 确认删除操作

> **注意**：如果薪酬组已分配给员工，则无法删除。需要先取消分配后才能删除。

### 薪酬组分配详细说明

系统支持三种分配方式，按优先级从高到低排序：

1. **按员工分配**（最高优先级）
   - 在「薪酬组分配」选项卡中选择「按员工分配」
   - 为单个员工指定专属薪酬组

2. **按职位分配**（中等优先级）
   - 在「薪酬组分配」选项卡中选择「按职位分配」
   - 为特定职位的所有员工分配相同薪酬组

3. **按部门分配**（最低优先级）
   - 在「薪酬组分配」选项卡中选择「按部门分配」
   - 为整个部门的员工分配相同薪酬组

当一个员工同时存在多种分配时，系统按照优先级选择最高优先级的薪酬组进行工资计算。

### 计算顺序重要性

在薪酬组中，薪酬项的计算顺序非常重要：

- 公式类型的薪酬项只能引用计算顺序在其之前的薪酬项
- 如果引用了计算顺序在后的薪酬项，系统会在保存时提示错误
- 合理设置计算顺序可以确保公式正确计算

### 公式计算示例

| 薪酬项名称 | 类型 | 值/公式 | 计算顺序 |
| --------- | ---- | ------- | -------- |
| 基本工资 | 固定金额 | 5000 | 1 |
| 岗位津贴 | 固定金额 | 1000 | 2 |
| 绩效比例 | 百分比 | 20 | 3 |
| 绩效工资 | 公式 | ${基本工资} * ${绩效比例} / 100 | 4 |
| 综合工资 | 公式 | ${基本工资} + ${岗位津贴} + ${绩效工资} | 5 |

计算过程：
1. 基本工资 = 5000
2. 岗位津贴 = 1000
3. 绩效比例 = 20%
4. 绩效工资 = 5000 * 20 / 100 = 1000
5. 综合工资 = 5000 + 1000 + 1000 = 7000

### 常见问题解答

#### 公式验证失败

如果公式验证失败，请检查：

- 公式中引用的薪酬项是否存在于当前薪酬组中
- 引用的薪酬项是否在计算顺序上位于当前项之前
- 公式语法是否正确（括号是否匹配、运算符使用是否正确）

#### 薪酬组无法删除

如果薪酬组无法删除，可能是因为：

- 该薪酬组已分配给一个或多个员工
- 该薪酬组已分配给部门或职位

请先取消所有分配后再尝试删除。

#### 薪酬计算结果异常

如果薪酬计算结果异常，请检查：

- 薪酬项的计算顺序是否合理
- 公式中是否存在错误
- 引用的薪酬项值是否正确

可以在薪酬组详情中查看每个薪酬项的计算过程，帮助排查问题。